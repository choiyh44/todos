/*! tcblog-todo 2015-06-22 */
!function(){var a=angular.module("todo",["todoServiceModule"]);a.controller("TodoController",["$http","todoService",function(a,b){this.todos=[],this.todoInput="",this.todoEdit="",this.editingTodoId=0,this.buttonStatus={All:!0,Active:!1,Completed:!1},this.itemViewCondition="All",this.itemViewFilter={},b.getAllTodos(this),this.onTodoFormSubmit=function(){if(this.todoInput.length){var a={id:null,name:this.todoInput,completed:!1};b.addTodo(a),this.todos.push(a),this.todoInput=""}},this.onButtonClick=function(a){this.itemViewCondition=a,this.setItemViewFilter();for(var b=0,c=this.buttonStatus.length;c>b;b++)this.buttonStatus[b]=!1;this.buttonStatus[a]=!0},this.setItemViewFilter=function(){"Active"===this.itemViewCondition?this.itemViewFilter.completed=!1:"Completed"===this.itemViewCondition?this.itemViewFilter.completed=!0:this.itemViewFilter={}},this.getActiveCount=function(){for(var a=0,b=0,c=this.todos.length;c>b;b++)this.todos[b].completed===!1&&a++;return a},this.getCompletedCount=function(){for(var a=0,b=0,c=this.todos.length;c>b;b++)this.todos[b].completed===!0&&a++;return a},this.isTodoEditing=function(a){return this.editingTodoId===a?!0:!1},this.editTodo=function(a){this.editingTodoId=a.id,this.todoEdit=a.name},this.onTodoEditFormSubmit=function(a){if(this.todoEdit.length&&0!==this.editingTodoId){var c={id:this.editingTodoId,name:this.todoEdit};b.updateTodo(c),a.name=this.todoEdit,this.editingTodoId=0,this.todoEdit=""}},this.onClickTodoCheckBox=function(a){var c={id:a.id,completed:a.completed};b.updateTodo(c)},this.clearCompleted=function(){for(var a=this.todos.length-1;a>=0;a--)this.todos[a].completed===!0&&(b.removeTodo(this.todos[a].id),this.todos.splice(a,1))},this.deleteTodo=function(a){if(confirm("삭제하시겠습니까!!!"))for(var c=this.todos.length-1;c>=0;c--)this.todos[c].id===a&&(b.removeTodo(this.todos[c].id),this.todos.splice(c,1))}}])}();